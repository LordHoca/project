import pandas as pede
from sklearn.model_selection import train_test_split
from sklearn.preprocessing import StandardScaler
from sklearn.neighbors import KNeighborsClassifier
from sklearn.metrics import accuracy_score, classification_report, confusion_matrix

df = pede.read_csv("Data Pasien penyakit liver.csv")
x = df [['Age', 'Gender', 'Total_Bilirubin', 'Direct_Bilirubin',
       'Alkaline_Phosphotase', 'Alamine_Aminotransferase',
       'Aspartate_Aminotransferase', 'Total_Protiens', 'Albumin',
       'Albumin_and_Globulin_Ratio']]
y = df ['Dataset']


x_train, x_test, y_train, y_test = train_test_split(x, y, test_size = 0.2, random_state = 42)

scaler = StandardScaler()
x_train = scaler.fit_transform(x_train)
x_test = scaler.transform(x_test)

K = 5
model = KNeighborsClassifier (n_neighbors = K)
model.fit (x_train, y_train)

y_pred = model.predict(x_test)

accuracy = accuracy_score (y_test, y_pred)
print('Metode klasifikasi\n')
print(f"Akurasi = {accuracy}")
print("\nLaporan Klasifikasi : ")
print(classification_report(y_test, y_pred))

print("\nMatriks Konfusi : ")
print(confusion_matrix(y_test, y_pred))

pasien_baru = [30,1,1.3,0.4,482,102,80,6.9,3.3,0.9] 
skala_pasien_baru = scaler.transform([pasien_baru])
prediksi = model.predict(skala_pasien_baru)

if prediksi[0] == 1 :
    print("\nPasien Baru Terindikasi Penyakit Liver.")
else :
    print("\nPasien Baru Tidak Terindikasi Penyakit Liver.")
    
